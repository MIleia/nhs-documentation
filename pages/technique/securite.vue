<template>
  <DocShell type="tech" :title="t('security.title')" :description="t('security.description')">
    <div class="prose prose-slate max-w-none dark:prose-invert">
      <h1>S√©curit√©</h1>
      
      <div class="not-prose bg-gradient-to-br from-red-50 to-orange-50 dark:from-red-950/20 dark:to-orange-950/20 rounded-2xl p-8 mb-12 border border-red-200/50 dark:border-red-800/30">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-4">üõ°Ô∏è S√©curit√© multicouche</h2>
        <p class="text-slate-700 dark:text-slate-300 leading-relaxed mb-6">
          Architecture de s√©curit√© robuste avec d√©fense en profondeur, conformit√© RGPD et protection contre 
          les vuln√©rabilit√©s OWASP Top 10. Gestion d'entreprise-r√©sidence avec s√©curit√© de niveau entreprise.
        </p>
        <div class="grid md:grid-cols-4 gap-4">
          <div class="bg-white/50 dark:bg-slate-800/50 rounded-xl p-4">
            <h3 class="font-bold text-red-900 dark:text-red-200 mb-2">üîê Authentication</h3>
            <p class="text-sm text-slate-600 dark:text-slate-300">Laravel Sanctum + 2FA</p>
          </div>
          <div class="bg-white/50 dark:bg-slate-800/50 rounded-xl p-4">
            <h3 class="font-bold text-red-900 dark:text-red-200 mb-2">üõ°Ô∏è Autorisation</h3>
            <p class="text-sm text-slate-600 dark:text-slate-300">RBAC granulaire</p>
          </div>
          <div class="bg-white/50 dark:bg-slate-800/50 rounded-xl p-4">
            <h3 class="font-bold text-red-900 dark:text-red-200 mb-2">üîí Chiffrement</h3>
            <p class="text-sm text-slate-600 dark:text-slate-300">AES-256 + TLS 1.3</p>
          </div>
          <div class="bg-white/50 dark:bg-slate-800/50 rounded-xl p-4">
            <h3 class="font-bold text-red-900 dark:text-red-200 mb-2">‚öñÔ∏è RGPD</h3>
            <p class="text-sm text-slate-600 dark:text-slate-300">Conformit√© compl√®te</p>
          </div>
        </div>
      </div>

      <!-- Authentification et autorisation -->
      <h2>Authentification et autorisation</h2>
      
      <h3>Syst√®me d'authentification</h3>
      <p>Laravel Sanctum pour authentification stateless moderne :</p>
      
      <div class="not-prose bg-blue-50 dark:bg-blue-950/20 rounded-xl p-6 my-6 border border-blue-200 dark:border-blue-800/30">
        <h4 class="font-bold text-blue-800 dark:text-blue-200 mb-4">üîë Laravel Sanctum</h4>
        <div class="grid md:grid-cols-2 gap-4 text-sm">
          <div>
            <h5 class="font-semibold text-blue-900 dark:text-blue-200 mb-2">Fonctionnalit√©s</h5>
            <ul class="space-y-1 text-blue-700 dark:text-blue-300">
              <li>‚Ä¢ <strong>Personal Access Tokens</strong> : Tokens API personnels</li>
              <li>‚Ä¢ <strong>SPA Authentication</strong> : Sessions s√©curis√©es SPA</li>
              <li>‚Ä¢ <strong>Mobile API Tokens</strong> : Authentification mobile</li>
              <li>‚Ä¢ <strong>Token Abilities</strong> : Permissions par token</li>
              <li>‚Ä¢ <strong>Token Expiration</strong> : Dur√©e de vie configurable</li>
            </ul>
          </div>
          <div>
            <h5 class="font-semibold text-blue-900 dark:text-blue-200 mb-2">Configuration s√©curis√©e</h5>
            <ul class="space-y-1 text-blue-700 dark:text-blue-300">
              <li>‚Ä¢ <strong>Stateful domains</strong> : Limitation des domaines</li>
              <li>‚Ä¢ <strong>CSRF Protection</strong> : Protection activ√©e</li>
              <li>‚Ä¢ <strong>Same-site cookies</strong> : Strict enforcement</li>
              <li>‚Ä¢ <strong>Secure cookies</strong> : HTTPS uniquement</li>
              <li>‚Ä¢ <strong>Http-only cookies</strong> : Pas d'acc√®s JS</li>
            </ul>
          </div>
        </div>
      </div>

      <h3>Authentification √† deux facteurs (2FA)</h3>
      <p>Couche de s√©curit√© suppl√©mentaire optionnelle :</p>
      
      <div class="not-prose bg-green-50 dark:bg-green-950/20 rounded-xl p-6 my-6 border border-green-200 dark:border-green-800/30">
        <h4 class="font-bold text-green-800 dark:text-green-200 mb-4">üì± 2FA Implementation</h4>
        <div class="space-y-4 text-sm">
          <div class="bg-green-100 dark:bg-green-900/30 rounded-lg p-4 border border-green-200 dark:border-green-800">
            <h5 class="font-semibold text-green-900 dark:text-green-200 mb-2">1. TOTP (Time-based OTP)</h5>
            <ul class="text-green-700 dark:text-green-300 space-y-1">
              <li>‚Ä¢ <strong>Applications compatibles</strong> : Google Authenticator, Authy, 1Password</li>
              <li>‚Ä¢ <strong>QR Code generation</strong> : Configuration simple utilisateur</li>
              <li>‚Ä¢ <strong>Backup codes</strong> : 8 codes de r√©cup√©ration g√©n√©r√©s</li>
              <li>‚Ä¢ <strong>Window tolerance</strong> : ¬±30 secondes pour d√©rive horaire</li>
            </ul>
          </div>
          <div class="bg-blue-100 dark:bg-blue-900/30 rounded-lg p-4 border border-blue-200 dark:border-blue-800">
            <h5 class="font-semibold text-blue-900 dark:text-blue-200 mb-2">2. SMS/Email Backup</h5>
            <ul class="text-blue-700 dark:text-blue-300 space-y-1">
              <li>‚Ä¢ <strong>SMS fallback</strong> : Si TOTP indisponible</li>
              <li>‚Ä¢ <strong>Email backup</strong> : M√©thode de r√©cup√©ration</li>
              <li>‚Ä¢ <strong>Rate limiting</strong> : 3 tentatives/5 minutes</li>
              <li>‚Ä¢ <strong>Temporary codes</strong> : Validit√© 10 minutes</li>
            </ul>
          </div>
        </div>
      </div>

      <h3>Syst√®me d'autorisation RBAC</h3>
      <p>Contr√¥le d'acc√®s bas√© sur les r√¥les avec permissions granulaires :</p>
      
      <div class="not-prose bg-purple-50 dark:bg-purple-950/20 rounded-xl p-6 my-6 border border-purple-200 dark:border-purple-800/30">
        <h4 class="font-bold text-purple-800 dark:text-purple-200 mb-4">üë• Structure RBAC</h4>
        <div class="grid md:grid-cols-3 gap-4 text-sm">
          <div class="bg-purple-100 dark:bg-purple-900/30 rounded-lg p-4 border border-purple-200 dark:border-purple-800">
            <h5 class="font-semibold text-purple-900 dark:text-purple-200 mb-2">üîê Super Admin</h5>
            <ul class="text-purple-700 dark:text-purple-300 space-y-1">
              <li>‚Ä¢ Gestion compl√®te utilisateurs</li>
              <li>‚Ä¢ Configuration syst√®me</li>
              <li>‚Ä¢ Acc√®s base de donn√©es</li>
              <li>‚Ä¢ Audit et logs</li>
              <li>‚Ä¢ Gestion des admins</li>
            </ul>
          </div>
          <div class="bg-indigo-100 dark:bg-indigo-900/30 rounded-lg p-4 border border-indigo-200 dark:border-indigo-800">
            <h5 class="font-semibold text-indigo-900 dark:text-indigo-200 mb-2">‚öôÔ∏è Administrateur</h5>
            <ul class="text-indigo-700 dark:text-indigo-300 space-y-1">
              <li>‚Ä¢ Gestion r√©sidents/visiteurs</li>
              <li>‚Ä¢ Configuration badges</li>
              <li>‚Ä¢ Supervision incidents</li>
              <li>‚Ä¢ Rapports et analytics</li>
              <li>‚Ä¢ Mod√©ration messagerie</li>
            </ul>
          </div>
          <div class="bg-blue-100 dark:bg-blue-900/30 rounded-lg p-4 border border-blue-200 dark:border-blue-800">
            <h5 class="font-semibold text-blue-900 dark:text-blue-200 mb-2">üõ°Ô∏è Gardien</h5>
            <ul class="text-blue-700 dark:text-blue-300 space-y-1">
              <li>‚Ä¢ Gestion incidents assign√©s</li>
              <li>‚Ä¢ Validation visites</li>
              <li>‚Ä¢ Contr√¥le badges actifs</li>
              <li>‚Ä¢ Communication r√©sidents</li>
              <li>‚Ä¢ Rapports de service</li>
            </ul>
          </div>
        </div>
        <div class="mt-4 bg-green-100 dark:bg-green-900/30 rounded-lg p-4 border border-green-200 dark:border-green-800">
          <h5 class="font-semibold text-green-900 dark:text-green-200 mb-2">üè† R√©sident</h5>
          <ul class="text-green-700 dark:text-green-300 space-y-1 text-sm">
            <li>‚Ä¢ Profil personnel uniquement ‚Ä¢ D√©claration incidents ‚Ä¢ Programmation visites ‚Ä¢ Messagerie avec gardiens/admin ‚Ä¢ Historique badges personnels</li>
          </ul>
        </div>
      </div>

      <!-- Protection contre vuln√©rabilit√©s -->
      <h2>Protection contre vuln√©rabilit√©s OWASP</h2>
      
      <h3>OWASP Top 10 - Mesures impl√©ment√©es</h3>
      <p>Protection contre les principales vuln√©rabilit√©s web :</p>
      
      <div class="not-prose bg-yellow-50 dark:bg-yellow-950/20 rounded-xl p-6 my-6 border border-yellow-200 dark:border-yellow-800/30">
        <h4 class="font-bold text-yellow-800 dark:text-yellow-200 mb-4">üö® OWASP Top 10 Protection</h4>
        <div class="space-y-4 text-sm">
          
          <div class="bg-red-100 dark:bg-red-900/30 rounded-lg p-4 border border-red-200 dark:border-red-800">
            <h5 class="font-semibold text-red-900 dark:text-red-200 mb-2">A01: Broken Access Control</h5>
            <ul class="text-red-700 dark:text-red-300 space-y-1">
              <li>‚Ä¢ <strong>Laravel Policies</strong> : Autorisation √† chaque endpoint</li>
              <li>‚Ä¢ <strong>Gate system</strong> : V√©rifications granulaires</li>
              <li>‚Ä¢ <strong>Middleware guards</strong> : Protection route automatique</li>
              <li>‚Ä¢ <strong>Resource policies</strong> : Contr√¥le CRUD par ressource</li>
            </ul>
          </div>

          <div class="bg-orange-100 dark:bg-orange-900/30 rounded-lg p-4 border border-orange-200 dark:border-orange-800">
            <h5 class="font-semibold text-orange-900 dark:text-orange-200 mb-2">A02: Cryptographic Failures</h5>
            <ul class="text-orange-700 dark:text-orange-300 space-y-1">
              <li>‚Ä¢ <strong>AES-256-CBC</strong> : Chiffrement donn√©es sensibles</li>
              <li>‚Ä¢ <strong>Bcrypt</strong> : Hash mots de passe (cost 12)</li>
              <li>‚Ä¢ <strong>TLS 1.3</strong> : Chiffrement transport uniquement</li>
              <li>‚Ä¢ <strong>HSTS</strong> : For√ßage HTTPS navigateur</li>
            </ul>
          </div>

          <div class="bg-yellow-100 dark:bg-yellow-900/30 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800">
            <h5 class="font-semibold text-yellow-900 dark:text-yellow-200 mb-2">A03: Injection</h5>
            <ul class="text-yellow-700 dark:text-yellow-300 space-y-1">
              <li>‚Ä¢ <strong>Eloquent ORM</strong> : Requ√™tes pr√©par√©es automatiques</li>
              <li>‚Ä¢ <strong>Form Requests</strong> : Validation et sanitization</li>
              <li>‚Ä¢ <strong>Input filtering</strong> : Nettoyage automatique inputs</li>
              <li>‚Ä¢ <strong>Query bindings</strong> : Param√®tres li√©s obligatoires</li>
            </ul>
          </div>

          <div class="bg-green-100 dark:bg-green-900/30 rounded-lg p-4 border border-green-200 dark:border-green-800">
            <h5 class="font-semibold text-green-900 dark:text-green-200 mb-2">A04: Insecure Design</h5>
            <ul class="text-green-700 dark:text-green-300 space-y-1">
              <li>‚Ä¢ <strong>Security by design</strong> : Architecture s√©curis√©e d√®s conception</li>
              <li>‚Ä¢ <strong>Threat modeling</strong> : Analyse des menaces m√©tier</li>
              <li>‚Ä¢ <strong>Fail-safe defaults</strong> : S√©curit√© par d√©faut</li>
              <li>‚Ä¢ <strong>Defense in depth</strong> : Couches de s√©curit√© multiples</li>
            </ul>
          </div>

          <div class="bg-blue-100 dark:bg-blue-900/30 rounded-lg p-4 border border-blue-200 dark:border-blue-800">
            <h5 class="font-semibold text-blue-900 dark:text-blue-200 mb-2">A05: Security Misconfiguration</h5>
            <ul class="text-blue-700 dark:text-blue-300 space-y-1">
              <li>‚Ä¢ <strong>Environment files</strong> : Configuration s√©curis√©e par env</li>
              <li>‚Ä¢ <strong>Debug disabled</strong> : Mode debug d√©sactiv√© en production</li>
              <li>‚Ä¢ <strong>Security headers</strong> : CSP, X-Frame-Options, etc.</li>
              <li>‚Ä¢ <strong>Error handling</strong> : Messages d'erreur non r√©v√©lateurs</li>
            </ul>
          </div>

        </div>
      </div>

      <h3>Protection XSS et CSRF</h3>
      <p>S√©curisation contre les attaques c√¥t√© client :</p>
      
      <div class="not-prose grid md:grid-cols-2 gap-6 my-8">
        <div class="bg-indigo-50 dark:bg-indigo-950/20 rounded-xl p-6 border border-indigo-200 dark:border-indigo-800/30">
          <h4 class="font-bold text-indigo-800 dark:text-indigo-200 mb-4">üõ°Ô∏è Protection XSS</h4>
          <ul class="text-sm text-indigo-700 dark:text-indigo-300 space-y-2">
            <li>‚Ä¢ <strong>Output encoding</strong> : √âchappement automatique Laravel</li>
            <li>‚Ä¢ <strong>Content Security Policy</strong> : CSP strict configur√©</li>
            <li>‚Ä¢ <strong>Input sanitization</strong> : Nettoyage donn√©es utilisateur</li>
            <li>‚Ä¢ <strong>HTMLPurifier</strong> : Filtrage HTML s√©curis√©</li>
            <li>‚Ä¢ <strong>Vue.js protection</strong> : Template s√©curis√© par d√©faut</li>
          </ul>
        </div>
        <div class="bg-teal-50 dark:bg-teal-950/20 rounded-xl p-6 border border-teal-200 dark:border-teal-800/30">
          <h4 class="font-bold text-teal-800 dark:text-teal-200 mb-4">üîí Protection CSRF</h4>
          <ul class="text-sm text-teal-700 dark:text-teal-300 space-y-2">
            <li>‚Ä¢ <strong>CSRF Tokens</strong> : Laravel tokens automatiques</li>
            <li>‚Ä¢ <strong>SameSite cookies</strong> : Protection navigateur</li>
            <li>‚Ä¢ <strong>Double Submit</strong> : Validation c√¥t√© client/serveur</li>
            <li>‚Ä¢ <strong>Origin validation</strong> : V√©rification origine requ√™tes</li>
            <li>‚Ä¢ <strong>Referer checking</strong> : Validation headers HTTP</li>
          </ul>
        </div>
      </div>

      <!-- Chiffrement et protection des donn√©es -->
      <h2>Chiffrement et protection des donn√©es</h2>
      
      <h3>Chiffrement au repos</h3>
      <p>Protection des donn√©es stock√©es avec chiffrement AES :</p>
      
      <div class="not-prose bg-red-50 dark:bg-red-950/20 rounded-xl p-6 my-6 border border-red-200 dark:border-red-800/30">
        <h4 class="font-bold text-red-800 dark:text-red-200 mb-4">üîê Encryption at Rest</h4>
        <div class="grid md:grid-cols-2 gap-4 text-sm">
          <div>
            <h5 class="font-semibold text-red-900 dark:text-red-200 mb-2">Donn√©es chiffr√©es</h5>
            <ul class="space-y-1 text-red-700 dark:text-red-300">
              <li>‚Ä¢ <strong>Donn√©es personnelles</strong> : Nom, pr√©nom, adresse</li>
              <li>‚Ä¢ <strong>Informations sensibles</strong> : T√©l√©phone, email</li>
              <li>‚Ä¢ <strong>Donn√©es m√©tier</strong> : Num√©ros badges, acc√®s</li>
              <li>‚Ä¢ <strong>Messages priv√©s</strong> : Contenu messagerie</li>
              <li>‚Ä¢ <strong>Fichiers upload√©s</strong> : Documents, photos</li>
            </ul>
          </div>
          <div>
            <h5 class="font-semibold text-red-900 dark:text-red-200 mb-2">Configuration AES</h5>
            <ul class="space-y-1 text-red-700 dark:text-red-300">
              <li>‚Ä¢ <strong>Algorithme</strong> : AES-256-CBC</li>
              <li>‚Ä¢ <strong>Cl√©s</strong> : Rotation automatique 90 jours</li>
              <li>‚Ä¢ <strong>Vecteurs IV</strong> : Uniques par chiffrement</li>
              <li>‚Ä¢ <strong>Key derivation</strong> : PBKDF2 avec salt</li>
              <li>‚Ä¢ <strong>Hardware Security</strong> : HSM pour cl√©s ma√Ætres</li>
            </ul>
          </div>
        </div>
      </div>

      <h3>Chiffrement en transit</h3>
      <p>S√©curisation de toutes les communications r√©seau :</p>
      
      <div class="not-prose bg-blue-50 dark:bg-blue-950/20 rounded-xl p-6 my-6 border border-blue-200 dark:border-blue-800/30">
        <h4 class="font-bold text-blue-800 dark:text-blue-200 mb-4">üåê Encryption in Transit</h4>
        <div class="space-y-4 text-sm">
          <div class="bg-blue-100 dark:bg-blue-900/30 rounded-lg p-4 border border-blue-200 dark:border-blue-800">
            <h5 class="font-semibold text-blue-900 dark:text-blue-200 mb-2">TLS Configuration</h5>
            <ul class="text-blue-700 dark:text-blue-300 space-y-1">
              <li>‚Ä¢ <strong>TLS 1.3 uniquement</strong> : Versions ant√©rieures d√©sactiv√©es</li>
              <li>‚Ä¢ <strong>Perfect Forward Secrecy</strong> : √âchange de cl√©s √©ph√©m√®res</li>
              <li>‚Ä¢ <strong>Strong cipher suites</strong> : AES-GCM, ChaCha20-Poly1305</li>
              <li>‚Ä¢ <strong>Certificate pinning</strong> : Validation certificats</li>
            </ul>
          </div>
          <div class="bg-green-100 dark:bg-green-900/30 rounded-lg p-4 border border-green-200 dark:border-green-800">
            <h5 class="font-semibold text-green-900 dark:text-green-200 mb-2">Headers de s√©curit√©</h5>
            <ul class="text-green-700 dark:text-green-300 space-y-1">
              <li>‚Ä¢ <strong>HSTS</strong> : Strict-Transport-Security max-age=31536000</li>
              <li>‚Ä¢ <strong>CSP</strong> : Content-Security-Policy strict</li>
              <li>‚Ä¢ <strong>X-Frame-Options</strong> : DENY (anti-clickjacking)</li>
              <li>‚Ä¢ <strong>X-Content-Type-Options</strong> : nosniff</li>
            </ul>
          </div>
        </div>
      </div>

      <h3>Gestion des mots de passe</h3>
      <p>Politique stricte pour mots de passe s√©curis√©s :</p>
      
      <ul>
        <li><strong>Complexit√© minimale :</strong> 8 caract√®res, majuscules, minuscules, chiffres</li>
        <li><strong>Hash s√©curis√© :</strong> Bcrypt avec cost factor 12</li>
        <li><strong>Politique rotation :</strong> Expiration 90 jours pour admins</li>
        <li><strong>Historique :</strong> Interdiction r√©utilisation 5 derniers mots de passe</li>
        <li><strong>Tentatives limit√©es :</strong> Verrouillage apr√®s 5 √©checs</li>
        <li><strong>Reset s√©curis√© :</strong> Tokens temporaires avec expiration</li>
      </ul>

      <!-- Conformit√© RGPD -->
      <h2>Conformit√© RGPD</h2>
      
      <h3>Droits des personnes concern√©es</h3>
      <p>Impl√©mentation compl√®te des droits RGPD :</p>
      
      <div class="not-prose bg-green-50 dark:bg-green-950/20 rounded-xl p-6 my-6 border border-green-200 dark:border-green-800/30">
        <h4 class="font-bold text-green-800 dark:text-green-200 mb-4">‚öñÔ∏è Droits RGPD impl√©ment√©s</h4>
        <div class="space-y-4 text-sm">
          
          <div class="bg-blue-100 dark:bg-blue-900/30 rounded-lg p-4 border border-blue-200 dark:border-blue-800">
            <h5 class="font-semibold text-blue-900 dark:text-blue-200 mb-2">Droit d'acc√®s (Art. 15)</h5>
            <ul class="text-blue-700 dark:text-blue-300 space-y-1">
              <li>‚Ä¢ <strong>Export personnel</strong> : API /api/user/data-export</li>
              <li>‚Ä¢ <strong>Format structur√©</strong> : JSON lisible par machine</li>
              <li>‚Ä¢ <strong>Donn√©es compl√®tes</strong> : Profil, messages, incidents, badges</li>
              <li>‚Ä¢ <strong>M√©tadonn√©es</strong> : Dates cr√©ation, modification, acc√®s</li>
            </ul>
          </div>

          <div class="bg-green-100 dark:bg-green-900/30 rounded-lg p-4 border border-green-200 dark:border-green-800">
            <h5 class="font-semibold text-green-900 dark:text-green-200 mb-2">Droit de rectification (Art. 16)</h5>
            <ul class="text-green-700 dark:text-green-300 space-y-1">
              <li>‚Ä¢ <strong>Modification profil</strong> : Interface utilisateur compl√®te</li>
              <li>‚Ä¢ <strong>Validation changements</strong> : Contr√¥les m√©tier</li>
              <li>‚Ä¢ <strong>Historique modifications</strong> : Audit trail complet</li>
              <li>‚Ä¢ <strong>Notification tiers</strong> : Propagation corrections</li>
            </ul>
          </div>

          <div class="bg-red-100 dark:bg-red-900/30 rounded-lg p-4 border border-red-200 dark:border-red-800">
            <h5 class="font-semibold text-red-900 dark:text-red-200 mb-2">Droit √† l'effacement (Art. 17)</h5>
            <ul class="text-red-700 dark:text-red-300 space-y-1">
              <li>‚Ä¢ <strong>Suppression compte</strong> : Soft delete avec anonymisation</li>
              <li>‚Ä¢ <strong>Purge automatique</strong> : Donn√©es apr√®s 3 ans inactivit√©</li>
              <li>‚Ä¢ <strong>Exceptions l√©gales</strong> : Conservation obligations comptables</li>
              <li>‚Ä¢ <strong>Confirmation utilisateur</strong> : Process de validation</li>
            </ul>
          </div>

          <div class="bg-purple-100 dark:bg-purple-900/30 rounded-lg p-4 border border-purple-200 dark:border-purple-800">
            <h5 class="font-semibold text-purple-900 dark:text-purple-200 mb-2">Droit √† la portabilit√© (Art. 20)</h5>
            <ul class="text-purple-700 dark:text-purple-300 space-y-1">
              <li>‚Ä¢ <strong>Export portable</strong> : Formats ouverts (JSON, CSV)</li>
              <li>‚Ä¢ <strong>API transfer</strong> : Transmission directe possible</li>
              <li>‚Ä¢ <strong>Donn√©es fournies</strong> : Uniquement donn√©es utilisateur</li>
              <li>‚Ä¢ <strong>Facilitation migration</strong> : Documentation format</li>
            </ul>
          </div>

        </div>
      </div>

      <h3>Gestion des consentements</h3>
      <p>Collecte et gestion transparente des consentements :</p>
      
      <div class="not-prose bg-orange-50 dark:bg-orange-950/20 rounded-xl p-6 my-6 border border-orange-200 dark:border-orange-800/30">
        <h4 class="font-bold text-orange-800 dark:text-orange-200 mb-4">‚úã Consent Management</h4>
        <div class="grid md:grid-cols-2 gap-4 text-sm">
          <div>
            <h5 class="font-semibold text-orange-900 dark:text-orange-200 mb-2">Collecte consentements</h5>
            <ul class="space-y-1 text-orange-700 dark:text-orange-300">
              <li>‚Ä¢ <strong>Finalit√©s explicites</strong> : Purpose clear pour chaque traitement</li>
              <li>‚Ä¢ <strong>Granularit√©</strong> : Consentement par finalit√© s√©par√©ment</li>
              <li>‚Ä¢ <strong>Opt-in actif</strong> : Pas de cases pr√©-coch√©es</li>
              <li>‚Ä¢ <strong>Langue claire</strong> : Formulation compr√©hensible</li>
              <li>‚Ä¢ <strong>Retrait facile</strong> : M√™me facilit√© que donner</li>
            </ul>
          </div>
          <div>
            <h5 class="font-semibold text-orange-900 dark:text-orange-200 mb-2">Tra√ßabilit√©</h5>
            <ul class="space-y-1 text-orange-700 dark:text-orange-300">
              <li>‚Ä¢ <strong>Horodatage</strong> : Date/heure exacte consentement</li>
              <li>‚Ä¢ <strong>Version formulaire</strong> : Tra√ßabilit√© √©volutions</li>
              <li>‚Ä¢ <strong>Preuves techniques</strong> : IP, User-Agent, etc.</li>
              <li>‚Ä¢ <strong>Dur√©e conservation</strong> : Preuve 3 ans apr√®s retrait</li>
              <li>‚Ä¢ <strong>Audit r√©gulier</strong> : R√©vision annuelle validit√©</li>
            </ul>
          </div>
        </div>
      </div>

      <h3>Registre des traitements</h3>
      <p>Documentation compl√®te des activit√©s de traitement :</p>
      
      <ol>
        <li><strong>Gestion des comptes utilisateurs :</strong>
          <ul>
            <li>Finalit√© : Authentification et gestion acc√®s</li>
            <li>Base l√©gale : Ex√©cution contrat (r√©sidence)</li>
            <li>Donn√©es : Identit√©, contact, permissions</li>
            <li>Conservation : Dur√©e du contrat + 3 ans</li>
          </ul>
        </li>
        <li><strong>Contr√¥le d'acc√®s physique :</strong>
          <ul>
            <li>Finalit√© : S√©curit√© des biens et personnes</li>
            <li>Base l√©gale : Int√©r√™t l√©gitime + obligations l√©gales</li>
            <li>Donn√©es : Badges, logs d'acc√®s, horaires</li>
            <li>Conservation : 1 an (vid√©osurveillance)</li>
          </ul>
        </li>
        <li><strong>Gestion incidents et maintenance :</strong>
          <ul>
            <li>Finalit√© : Maintenance et am√©lioration services</li>
            <li>Base l√©gale : Ex√©cution contrat</li>
            <li>Donn√©es : D√©clarations, photos, r√©solutions</li>
            <li>Conservation : 5 ans (obligations comptables)</li>
          </ul>
        </li>
      </ol>

      <!-- Audit et logs de s√©curit√© -->
      <h2>Audit et logs de s√©curit√©</h2>
      
      <h3>Syst√®me de logging complet</h3>
      <p>Tra√ßabilit√© exhaustive des actions s√©curitaires :</p>
      
      <div class="not-prose bg-gray-50 dark:bg-gray-800/50 rounded-xl p-6 my-6 border border-gray-200 dark:border-gray-700">
        <h4 class="font-bold text-gray-800 dark:text-gray-200 mb-4">üìã Security Logs</h4>
        <div class="grid md:grid-cols-2 gap-4 text-sm">
          <div>
            <h5 class="font-semibold text-gray-900 dark:text-gray-200 mb-2">√âv√©nements trac√©s</h5>
            <ul class="space-y-1 text-gray-600 dark:text-gray-300">
              <li>‚Ä¢ <strong>Authentification</strong> : Login/logout, √©checs, 2FA</li>
              <li>‚Ä¢ <strong>Autorisation</strong> : Tentatives acc√®s non autoris√©</li>
              <li>‚Ä¢ <strong>Modifications donn√©es</strong> : CRUD operations</li>
              <li>‚Ä¢ <strong>Configuration</strong> : Changements param√®tres</li>
              <li>‚Ä¢ <strong>Acc√®s physique</strong> : Badges, ouvertures</li>
              <li>‚Ä¢ <strong>Erreurs syst√®me</strong> : Exceptions, pannes</li>
            </ul>
          </div>
          <div>
            <h5 class="font-semibold text-gray-900 dark:text-gray-200 mb-2">Informations captur√©es</h5>
            <ul class="space-y-1 text-gray-600 dark:text-gray-300">
              <li>‚Ä¢ <strong>Timestamp</strong> : UTC pr√©cis √† la milliseconde</li>
              <li>‚Ä¢ <strong>User ID</strong> : Utilisateur concern√©</li>
              <li>‚Ä¢ <strong>IP Address</strong> : Adresse source</li>
              <li>‚Ä¢ <strong>User Agent</strong> : Client/navigateur</li>
              <li>‚Ä¢ <strong>Action d√©taill√©e</strong> : Type et param√®tres</li>
              <li>‚Ä¢ <strong>R√©sultat</strong> : Succ√®s/√©chec + d√©tails</li>
            </ul>
          </div>
        </div>
      </div>

      <h3>Monitoring et alertes s√©curit√©</h3>
      <p>D√©tection proactive des anomalies et menaces :</p>
      
      <div class="not-prose bg-red-50 dark:bg-red-950/20 rounded-xl p-6 my-6 border border-red-200 dark:border-red-800/30">
        <h4 class="font-bold text-red-800 dark:text-red-200 mb-4">üö® Security Monitoring</h4>
        <div class="space-y-4 text-sm">
          
          <div class="bg-red-100 dark:bg-red-900/30 rounded-lg p-4 border border-red-200 dark:border-red-800">
            <h5 class="font-semibold text-red-900 dark:text-red-200 mb-2">D√©tection d'intrusion</h5>
            <ul class="text-red-700 dark:text-red-300 space-y-1">
              <li>‚Ä¢ <strong>Tentatives brute force</strong> : >5 √©checs login/5min</li>
              <li>‚Ä¢ <strong>Escalade privil√®ges</strong> : Tentatives acc√®s non autoris√©</li>
              <li>‚Ä¢ <strong>G√©olocalisation</strong> : Connexions pays inhabituels</li>
              <li>‚Ä¢ <strong>Horaires atypiques</strong> : Activit√© heures non ouvr√©es</li>
            </ul>
          </div>

          <div class="bg-orange-100 dark:bg-orange-900/30 rounded-lg p-4 border border-orange-200 dark:border-orange-800">
            <h5 class="font-semibold text-orange-900 dark:text-orange-200 mb-2">Anomalies comportementales</h5>
            <ul class="text-orange-700 dark:text-orange-300 space-y-1">
              <li>‚Ä¢ <strong>Volume requests</strong> : Pics activit√© inhabituelle</li>
              <li>‚Ä¢ <strong>Patterns d'acc√®s</strong> : Comportements d√©viants</li>
              <li>‚Ä¢ <strong>Data exfiltration</strong> : T√©l√©chargements massifs</li>
              <li>‚Ä¢ <strong>Modifications critiques</strong> : Changements sensibles</li>
            </ul>
          </div>

          <div class="bg-yellow-100 dark:bg-yellow-900/30 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800">
            <h5 class="font-semibold text-yellow-900 dark:text-yellow-200 mb-2">R√©ponse automatique</h5>
            <ul class="text-yellow-700 dark:text-yellow-300 space-y-1">
              <li>‚Ä¢ <strong>Blocage temporaire</strong> : IP/compte suspect</li>
              <li>‚Ä¢ <strong>Escalade</strong> : Notification √©quipe s√©curit√©</li>
              <li>‚Ä¢ <strong>Capture forensique</strong> : Pr√©servation preuves</li>
              <li>‚Ä¢ <strong>Isolation</strong> : Limitation permissions automatique</li>
            </ul>
          </div>

        </div>
      </div>

      <!-- Tests de s√©curit√© -->
      <h2>Tests et validation de s√©curit√©</h2>
      
      <h3>Tests de p√©n√©tration</h3>
      <p>Validation r√©guli√®re de la posture s√©curitaire :</p>
      
      <div class="not-prose bg-purple-50 dark:bg-purple-950/20 rounded-xl p-6 my-6 border border-purple-200 dark:border-purple-800/30">
        <h4 class="font-bold text-purple-800 dark:text-purple-200 mb-4">üéØ Penetration Testing</h4>
        <div class="grid md:grid-cols-2 gap-4 text-sm">
          <div>
            <h5 class="font-semibold text-purple-900 dark:text-purple-200 mb-2">Tests automatis√©s</h5>
            <ul class="space-y-1 text-purple-700 dark:text-purple-300">
              <li>‚Ä¢ <strong>SAST</strong> : Analyse statique code source</li>
              <li>‚Ä¢ <strong>DAST</strong> : Tests dynamiques application</li>
              <li>‚Ä¢ <strong>Dependency scan</strong> : Vuln√©rabilit√©s composants</li>
              <li>‚Ä¢ <strong>OWASP ZAP</strong> : Scan automatique OWASP Top 10</li>
            </ul>
          </div>
          <div>
            <h5 class="font-semibold text-purple-900 dark:text-purple-200 mb-2">Tests manuels</h5>
            <ul class="space-y-1 text-purple-700 dark:text-purple-300">
              <li>‚Ä¢ <strong>Pentest externe</strong> : Annuel par tiers certifi√©</li>
              <li>‚Ä¢ <strong>Red team</strong> : Simulation attaque avanc√©e</li>
              <li>‚Ä¢ <strong>Social engineering</strong> : Tests phishing cibl√©</li>
              <li>‚Ä¢ <strong>Physical security</strong> : Test acc√®s physique</li>
            </ul>
          </div>
        </div>
      </div>

      <h3>Vulnerability management</h3>
      <p>Processus de gestion des vuln√©rabilit√©s d√©couvertes :</p>
      
      <ol>
        <li><strong>Identification :</strong> Scans automatis√©s + remont√©es manuelles</li>
        <li><strong>Classification :</strong> CVSS score + impact m√©tier</li>
        <li><strong>Priorisation :</strong> Critique < 72h, High < 1 semaine</li>
        <li><strong>Remediation :</strong> Patch, workaround ou mitigation</li>
        <li><strong>Verification :</strong> Tests de non-r√©gression</li>
        <li><strong>Documentation :</strong> Mise √† jour proc√©dures s√©curit√©</li>
      </ol>

      <!-- Conclusion -->
      <div class="not-prose bg-gradient-to-br from-red-50 to-orange-50 dark:from-red-950/20 dark:to-orange-950/20 rounded-2xl p-8 mt-12 border border-red-200/50 dark:border-red-800/30">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-4">üõ°Ô∏è S√©curit√© de niveau entreprise</h2>
        <p class="text-slate-700 dark:text-slate-300 leading-relaxed mb-6">
          Cette architecture de s√©curit√© multicouche garantit la protection des donn√©es de gestion d'entreprise-r√©sidence 
          avec conformit√© RGPD compl√®te, d√©fense contre OWASP Top 10 et monitoring proactif des menaces.
        </p>
        <div class="grid md:grid-cols-4 gap-4">
          <div class="bg-white/50 dark:bg-slate-800/50 rounded-xl p-4">
            <h3 class="font-bold text-red-900 dark:text-red-200 mb-2">üîê Auth robuste</h3>
            <p class="text-sm text-slate-600 dark:text-slate-300">Sanctum + 2FA + RBAC</p>
          </div>
          <div class="bg-white/50 dark:bg-slate-800/50 rounded-xl p-4">
            <h3 class="font-bold text-red-900 dark:text-red-200 mb-2">üõ°Ô∏è Protection OWASP</h3>
            <p class="text-sm text-slate-600 dark:text-slate-300">Top 10 mitig√© compl√®tement</p>
          </div>
          <div class="bg-white/50 dark:bg-slate-800/50 rounded-xl p-4">
            <h3 class="font-bold text-red-900 dark:text-red-200 mb-2">‚öñÔ∏è RGPD complet</h3>
            <p class="text-sm text-slate-600 dark:text-slate-300">Tous droits impl√©ment√©s</p>
          </div>
          <div class="bg-white/50 dark:bg-slate-800/50 rounded-xl p-4">
            <h3 class="font-bold text-red-900 dark:text-red-200 mb-2">üö® Monitoring 24/7</h3>
            <p class="text-sm text-slate-600 dark:text-slate-300">D√©tection proactive</p>
          </div>
        </div>
      </div>
    </div>
  </DocShell>
</template>

<script setup lang="ts">
import { onMounted } from 'vue'

// Import du syst√®me de th√®me
const { initTheme } = useTheme()

// Fonction de traduction utilisant les fichiers JSON i18n
const route = useRoute()
const getCurrentLocale = () => {
  const path = route.path
  if (path.startsWith('/en')) return 'en'
  if (path.startsWith('/zh')) return 'zh'
  return 'fr'
}
const locale = getCurrentLocale()

// Fonction de traduction simple
const t = (key: string) => {
  const translations: Record<string, Record<string, any>> = {
    fr: {
      'security': {
        'title': 'S√©curit√©',
        'description': 'Mesures de s√©curit√© et protocoles'
      }
    }
  }
  
  const keys = key.split('.')
  let value = translations[locale]
  
  for (const k of keys) {
    if (value && typeof value === 'object' && k in value) {
      value = value[k]
    } else {
      return key
    }
  }
  
  return typeof value === 'string' ? value : key
}

useHead({ title: t('security.title') + ' - Documentation technique' })

onMounted(() => {
  initTheme()
})
</script>


