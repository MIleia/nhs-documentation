<template>
  <DocShell type="guide" title="Gestion des utilisateurs" description="G√©rer les r√©sidents, r√¥les et permissions selon votre niveau d'acc√®s">
    <div class="prose prose-slate max-w-none dark:prose-invert">
      <h1>Gestion des utilisateurs & r√¥les</h1>
      
      <div class="not-prose bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20 rounded-2xl p-8 mb-12 border border-blue-200/50 dark:border-blue-800/30">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-4">üë• Syst√®me de r√¥les</h2>
        <p class="text-slate-700 dark:text-slate-300 leading-relaxed mb-6">
          La plateforme utilise un syst√®me de r√¥les pour adapter les fonctionnalit√©s selon le niveau de responsabilit√©. 
          Chaque r√¥le a ses propres permissions et acc√®s aux donn√©es.
        </p>
        <div class="grid md:grid-cols-3 gap-4">
          <div class="bg-white/50 dark:bg-slate-800/50 rounded-xl p-4">
            <h3 class="font-bold text-red-900 dark:text-red-200 mb-2">üîê Administrateur</h3>
            <p class="text-sm text-slate-600 dark:text-slate-300">Acc√®s complet √† toutes les fonctionnalit√©s</p>
          </div>
          <div class="bg-white/50 dark:bg-slate-800/50 rounded-xl p-4">
            <h3 class="font-bold text-orange-900 dark:text-orange-200 mb-2">üõ°Ô∏è Gardien</h3>
            <p class="text-sm text-slate-600 dark:text-slate-300">Contr√¥le d'acc√®s et s√©curit√©</p>
          </div>
          <div class="bg-white/50 dark:bg-slate-800/50 rounded-xl p-4">
            <h3 class="font-bold text-green-900 dark:text-green-200 mb-2">üè† R√©sident</h3>
            <p class="text-sm text-slate-600 dark:text-slate-300">Acc√®s aux services r√©sidents</p>
          </div>
        </div>
      </div>

      <!-- R√¥les et permissions -->
      <h2>R√¥les et permissions</h2>
      
      <h3>Administrateur (Super utilisateur)</h3>
      <p>L'administrateur a un acc√®s complet √† toutes les fonctionnalit√©s de la plateforme :</p>
      
      <div class="not-prose bg-red-50 dark:bg-red-950/20 rounded-xl p-6 my-6 border border-red-200 dark:border-red-800/30">
        <h4 class="font-bold text-red-800 dark:text-red-200 mb-4">Permissions administrateur</h4>
        <div class="grid md:grid-cols-2 gap-4 text-sm">
          <div>
            <h5 class="font-semibold text-red-900 dark:text-red-200 mb-2">Gestion des utilisateurs</h5>
            <ul class="space-y-1 text-red-700 dark:text-red-300">
              <li>‚Ä¢ Cr√©er, modifier des comptes existants</li>
              <li>‚Ä¢ Assigner et modifier les r√¥les</li>
              <li>‚Ä¢ Consulter la liste des utilisateurs</li>
              <li>‚Ä¢ Modifier les informations personnelles</li>
            </ul>
          </div>
          <div>
            <h5 class="font-semibold text-red-900 dark:text-red-200 mb-2">Acc√®s aux donn√©es</h5>
            <ul class="space-y-1 text-red-700 dark:text-red-300">
              <li>‚Ä¢ Gestion des badges attribu√©s</li>
              <li>‚Ä¢ Consultation des incidents</li>
              <li>‚Ä¢ Acc√®s √† la messagerie globale</li>
              <li>‚Ä¢ Vue d'ensemble du tableau de bord</li>
            </ul>
          </div>
        </div>
      </div>

      <h3>Gardien (S√©curit√© et contr√¥le)</h3>
      <p>Le gardien se concentre sur la s√©curit√© et le contr√¥le d'acc√®s :</p>
      
      <div class="not-prose bg-orange-50 dark:bg-orange-950/20 rounded-xl p-6 my-6 border border-orange-200 dark:border-orange-800/30">
        <h4 class="font-bold text-orange-800 dark:text-orange-200 mb-4">Permissions gardien</h4>
        <div class="grid md:grid-cols-2 gap-4 text-sm">
          <div>
            <h5 class="font-semibold text-orange-900 dark:text-orange-200 mb-2">Surveillance</h5>
            <ul class="space-y-1 text-orange-700 dark:text-orange-300">
              <li>‚Ä¢ Consultation des badges</li>
              <li>‚Ä¢ Suivi des incidents signal√©s</li>
              <li>‚Ä¢ Acc√®s aux informations r√©sidents</li>
              <li>‚Ä¢ Communication via messagerie</li>
            </ul>
          </div>
          <div>
            <h5 class="font-semibold text-orange-900 dark:text-orange-200 mb-2">Gestion des incidents</h5>
            <ul class="space-y-1 text-orange-700 dark:text-orange-300">
              <li>‚Ä¢ Signalement d'incidents</li>
              <li>‚Ä¢ Consultation du statut</li>
              <li>‚Ä¢ Communication avec administration</li>
              <li>‚Ä¢ Acc√®s au tableau de bord gardien</li>
            </ul>
          </div>
        </div>
      </div>

      <h3>R√©sident (Utilisateur standard)</h3>
      <p>Le r√©sident a acc√®s aux services essentiels :</p>
      
      <div class="not-prose bg-green-50 dark:bg-green-950/20 rounded-xl p-6 my-6 border border-green-200 dark:border-green-800/30">
        <h4 class="font-bold text-green-800 dark:text-green-200 mb-4">Permissions r√©sident</h4>
        <div class="grid md:grid-cols-2 gap-4 text-sm">
          <div>
            <h5 class="font-semibold text-green-900 dark:text-green-200 mb-2">Services personnels</h5>
            <ul class="space-y-1 text-green-700 dark:text-green-300">
              <li>‚Ä¢ Gestion du profil personnel</li>
              <li>‚Ä¢ Messagerie interne</li>
              <li>‚Ä¢ Signalement d'incidents</li>
              <li>‚Ä¢ Consultation des badges attribu√©s</li>
            </ul>
          </div>
          <div>
            <h5 class="font-semibold text-green-900 dark:text-green-200 mb-2">Communication</h5>
            <ul class="space-y-1 text-green-700 dark:text-green-300">
              <li>‚Ä¢ Messages avec administration</li>
              <li>‚Ä¢ Messages avec autres r√©sidents</li>
              <li>‚Ä¢ Suivi des incidents signal√©s</li>
              <li>‚Ä¢ Acc√®s au tableau de bord r√©sident</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Gestion des utilisateurs (Admin) -->
      <h2>Gestion des utilisateurs (Administrateur)</h2>
      
      <h3>Cr√©er un nouvel utilisateur</h3>
      <ol>
        <li>Connectez-vous en tant qu'administrateur</li>
        <li>Acc√©dez au tableau de bord et cliquez sur "Ajouter un utilisateur"</li>
        <li>S√©lectionnez les r√¥les √† attribuer (admin, gardien, r√©sident)</li>
        <li>Remplissez les informations obligatoires :
          <ul>
            <li>Nom et pr√©nom</li>
            <li>Adresse email (unique)</li>
            <li>Num√©ro de t√©l√©phone</li>
            <li>Mot de passe initial</li>
            <li>Adresse de logement (pour les r√©sidents)</li>
          </ul>
        </li>
        <li>Validez la cr√©ation</li>
      </ol>

      <div class="not-prose bg-blue-50 dark:bg-blue-950/20 rounded-xl p-6 my-6 border border-blue-200 dark:border-blue-800/30">
        <h4 class="font-bold text-blue-800 dark:text-blue-200 mb-2">üí° Bonnes pratiques</h4>
        <ul class="text-sm text-blue-700 dark:text-blue-300 space-y-1">
          <li>‚Ä¢ L'email doit √™tre unique dans le syst√®me</li>
          <li>‚Ä¢ Un utilisateur peut avoir plusieurs r√¥les</li>
          <li>‚Ä¢ Le mot de passe peut √™tre modifi√© ult√©rieurement</li>
          <li>‚Ä¢ V√©rifiez les informations avant validation</li>
        </ul>
      </div>

      <h3>Modifier un utilisateur existant</h3>
      <ol>
        <li>Dans la liste des utilisateurs, cliquez sur l'utilisateur √† modifier</li>
        <li>Utilisez l'option "Modifier" dans les actions disponibles</li>
        <li>Modifiez les informations n√©cessaires (nom, pr√©nom, email, t√©l√©phone)</li>
        <li>Changez les r√¥les attribu√©s si besoin</li>
        <li>Modifiez l'adresse de logement pour les r√©sidents</li>
        <li>Sauvegardez les modifications</li>
      </ol>

      <h3>Consulter les badges d'acc√®s</h3>
      <ol>
        <li>Acc√©dez √† la section "Badges" depuis le menu admin</li>
        <li>Consultez la liste des badges attribu√©s</li>
        <li>V√©rifiez le statut de chaque badge (actif/inactif)</li>
        <li>Consultez les informations d'attribution</li>
      </ol>

      <!-- Gestion de profil (Tous r√¥les) -->
      <h2>Gestion de profil personnel</h2>
      
      <h3>Mettre √† jour ses informations</h3>
      <p>Tous les utilisateurs peuvent g√©rer certaines informations de leur profil :</p>
      
      <ol>
        <li>Connectez-vous √† votre compte</li>
        <li>Acc√©dez aux param√®tres de profil</li>
        <li>Modifiez vos informations personnelles accessibles</li>
        <li>Changez votre mot de passe si n√©cessaire</li>
        <li>Sauvegardez les modifications</li>
      </ol>

      <h3>Changer son mot de passe</h3>
      <ol>
        <li>Acc√©dez aux param√®tres de s√©curit√©</li>
        <li>Saisissez votre mot de passe actuel</li>
        <li>Entrez le nouveau mot de passe</li>
        <li>Validez le changement</li>
      </ol>

      <div class="not-prose bg-amber-50 dark:bg-amber-950/20 rounded-xl p-6 my-6 border border-amber-200 dark:border-amber-800/30">
        <h4 class="font-bold text-amber-800 dark:text-amber-200 mb-2">üîí S√©curit√© du mot de passe</h4>
        <ul class="text-sm text-amber-700 dark:text-amber-300 space-y-1">
          <li>‚Ä¢ Minimum 8 caract√®res</li>
          <li>‚Ä¢ M√©lange de lettres, chiffres et symboles</li>
          <li>‚Ä¢ √âvitez les informations personnelles</li>
          <li>‚Ä¢ Changez r√©guli√®rement votre mot de passe</li>
        </ul>
      </div>

      <!-- Communication et notifications -->
      <h2>Communication entre utilisateurs</h2>
      
      <h3>Annuaire et contacts</h3>
      <p>L'annuaire adapte son contenu selon votre r√¥le :</p>
      
      <ul>
        <li><strong>Administrateur :</strong> Voit tous les utilisateurs avec d√©tails complets</li>
        <li><strong>Gardien :</strong> Acc√®s aux r√©sidents et autres gardiens</li>
        <li><strong>R√©sident :</strong> Contacts administration et autres r√©sidents (selon param√®tres)</li>
      </ul>

      <h3>Messagerie interne</h3>
      <ol>
        <li>Acc√©dez √† la section "Messages"</li>
        <li>Consultez vos conversations existantes</li>
        <li>Cr√©ez une nouvelle conversation avec d'autres utilisateurs</li>
        <li>R√©digez et envoyez votre message</li>
        <li>Suivez les r√©ponses dans l'interface de messagerie</li>
      </ol>

      <!-- Cas d'usage pratiques -->
      <h2>Cas d'usage pratiques</h2>
      
      <h3>Scenario 1 : Nouveau r√©sident</h3>
      <div class="not-prose bg-gray-50 dark:bg-gray-800/50 rounded-xl p-6 my-6 border border-gray-200 dark:border-gray-700">
        <h4 class="font-bold text-gray-800 dark:text-gray-200 mb-3">√âtapes pour l'administrateur :</h4>
        <ol class="text-sm text-gray-600 dark:text-gray-300 space-y-1">
          <li>1. Cr√©er le compte r√©sident avec email et informations de base</li>
          <li>2. Saisir l'adresse de logement dans le formulaire</li>
          <li>3. Attribuer le r√¥le "r√©sident"</li>
          <li>4. D√©finir un mot de passe initial</li>
          <li>5. Communiquer les identifiants au nouveau r√©sident</li>
        </ol>
      </div>

      <h3>Scenario 2 : Changement de r√¥le</h3>
      <div class="not-prose bg-gray-50 dark:bg-gray-800/50 rounded-xl p-6 my-6 border border-gray-200 dark:border-gray-700">
        <h4 class="font-bold text-gray-800 dark:text-gray-200 mb-3">Promotion gardien ‚Üí administrateur :</h4>
        <ol class="text-sm text-gray-600 dark:text-gray-300 space-y-1">
          <li>1. Modifier le profil utilisateur existant</li>
          <li>2. Ajouter le r√¥le "admin" en plus de "gardien"</li>
          <li>3. Sauvegarder les modifications</li>
          <li>4. Notifier l'utilisateur du changement</li>
          <li>5. V√©rifier l'acc√®s aux nouvelles fonctionnalit√©s</li>
        </ol>
      </div>

      <h3>Scenario 3 : Gestion des badges</h3>
      <div class="not-prose bg-gray-50 dark:bg-gray-800/50 rounded-xl p-6 my-6 border border-gray-200 dark:border-gray-700">
        <h4 class="font-bold text-gray-800 dark:text-gray-200 mb-3">Consultation des badges attribu√©s :</h4>
        <ol class="text-sm text-gray-600 dark:text-gray-300 space-y-1">
          <li>1. Acc√©der √† la section "Badges" depuis l'administration</li>
          <li>2. Consulter la liste des badges avec leur statut</li>
          <li>3. V√©rifier l'attribution √† chaque utilisateur</li>
          <li>4. Consulter l'historique si n√©cessaire</li>
        </ol>
      </div>

      <!-- D√©pannage -->
      <h2>D√©pannage courant</h2>
      
      <h3>Probl√®mes de connexion</h3>
      <div class="not-prose space-y-4 my-6">
        <div class="bg-red-50 dark:bg-red-950/20 rounded-xl p-4 border border-red-200 dark:border-red-800/30">
          <h4 class="font-bold text-red-800 dark:text-red-200 mb-2">‚ùå "Email ou mot de passe incorrect"</h4>
          <ul class="text-sm text-red-700 dark:text-red-300 space-y-1">
            <li>‚Ä¢ V√©rifier l'orthographe de l'email</li>
            <li>‚Ä¢ Essayer la r√©initialisation de mot de passe</li>
            <li>‚Ä¢ Contacter l'administrateur si compte bloqu√©</li>
          </ul>
        </div>
        <div class="bg-yellow-50 dark:bg-yellow-950/20 rounded-xl p-4 border border-yellow-200 dark:border-yellow-800/30">
          <h4 class="font-bold text-yellow-800 dark:text-yellow-200 mb-2">‚ö†Ô∏è "Acc√®s refus√© √† cette section"</h4>
          <ul class="text-sm text-yellow-700 dark:text-yellow-300 space-y-1">
            <li>‚Ä¢ V√©rifier que votre r√¥le permet l'acc√®s</li>
            <li>‚Ä¢ Demander une mise √† jour de permissions si n√©cessaire</li>
            <li>‚Ä¢ Signaler le probl√®me √† l'administrateur</li>
          </ul>
        </div>
      </div>

      <h3>Badge non reconnu</h3>
      <ul>
        <li>V√©rifier le statut du badge dans l'application (actif/inactif)</li>
        <li>Consulter les informations d'attribution</li>
        <li>Contacter l'administration via la messagerie</li>
        <li>Signaler le probl√®me dans la section incidents si n√©cessaire</li>
      </ul>

      <!-- Support et assistance -->
      <div class="not-prose bg-gradient-to-br from-violet-50 to-purple-50 dark:from-violet-950/20 dark:to-purple-950/20 rounded-2xl p-8 mt-12 border border-violet-200/50 dark:border-violet-800/30">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-4">üÜò Besoin d'aide ?</h2>
        <p class="text-slate-700 dark:text-slate-300 leading-relaxed mb-6">
          Plusieurs options s'offrent √† vous pour obtenir de l'assistance :
        </p>
        <div class="grid md:grid-cols-2 gap-4">
          <div class="bg-white/50 dark:bg-slate-800/50 rounded-xl p-4">
            <h3 class="font-bold text-violet-900 dark:text-violet-200 mb-2">üí¨ Support interne</h3>
            <p class="text-sm text-slate-600 dark:text-slate-300">Utilisez la messagerie pour contacter l'administration</p>
          </div>
          <div class="bg-white/50 dark:bg-slate-800/50 rounded-xl p-4">
            <h3 class="font-bold text-violet-900 dark:text-violet-200 mb-2">ÔøΩ Incidents</h3>
            <p class="text-sm text-slate-600 dark:text-slate-300">Signalez les probl√®mes via la section incidents</p>
          </div>
        </div>
      </div>

      <div class="text-center mt-12 p-6 bg-gradient-to-r from-blue-100 to-indigo-100 dark:from-blue-900/30 dark:to-indigo-900/30 rounded-xl border border-blue-200 dark:border-blue-700">
        <p class="text-sm text-blue-700 dark:text-blue-300">
          <strong>Guide utilisateurs :</strong> Pour plus de d√©tails sur chaque fonctionnalit√©, consultez les guides sp√©cialis√©s.
        </p>
      </div>
    </div>
  </DocShell>
</template>

<script setup lang="ts">
  import { onMounted } from 'vue'
  import { useTheme } from '../../composables/useTheme'
  
  // Import du syst√®me de th√®me
  const { initTheme } = useTheme()
  useHead({ title: 'Gestion des utilisateurs - Documentation' })

  onMounted(() => {
    initTheme()
  })
</script>


